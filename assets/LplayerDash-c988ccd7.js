import{f as _,s as b,g as p,h as f,k as C,l as m,_ as B,o as h,c as D,j as I,i as k,m as E,a as v,F as V}from"./app-a121b844.js";const F=_({name:"LplayerDash",setup(){const a=b(null),o=p(null),u=f({video:{src:"https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd"},customType:!0}),t=p(null),n=f({player:null,src:""}),l=(e,s,i=!1,d=0)=>{var c;n.src=s||n.src,n.player=e||n.player,(c=t.value)==null||c.initialize(n.player,n.src,i,d)},r=()=>{if(!t.value)return;const e=[];return t.value.isReady()&&t.value.getBitrateInfoListFor("video").forEach(s=>{e.push(+s.height)}),e},y=e=>{if(!t.value||!t.value.isReady())return;const i=t.value.getBitrateInfoListFor("video").findIndex(d=>d.height===e);t.value.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:i===-1&&e===1,audio:i===-1&&e===1}},buffer:{flushBufferAtTrackSwitch:!0}}}),t.value.setQualityFor("video",i,!0)},g=()=>{var e;u.customType&&((e=o.value)==null||e.setQualityList(r()))},L=()=>{var e;o.value&&((e=o.value)==null||e.changeVideo("http://file.konmio.com/hls/gmtx.mpd"))};return C(()=>{m(()=>import("./index-59b7073d.js"),["assets/index-59b7073d.js","assets/app-a121b844.js"]).then(e=>{a.value=e.default}),m(()=>import("./dash.all.min-34fac015.js").then(e=>e.d),[]).then(e=>{t.value=e.default.MediaPlayer().create(),n.player&&l(n.player,n.src)})}),{option:u,lplayer:o,dynamicComponent:a,dashInit:l,changeVideo:L,setBitrate:y,getBitrateList:r,setQualityList:g}}});function Q(a,o,u,t,n,l){return h(),D(V,null,[I(" currentTab 改变时组件也改变 "),(h(),k(E(a.dynamicComponent),{ref:"lplayer",option:a.option,onCustomInit:a.dashInit,onChangeQuality:a.setBitrate,onLoadedmetadata:a.setQualityList},null,40,["option","onCustomInit","onChangeQuality","onLoadedmetadata"])),v("div",null,[v("button",{style:{margin:"10px"},onClick:o[0]||(o[0]=(...r)=>a.changeVideo&&a.changeVideo(...r))}," Dash--ChangeVideoResource ")])],64)}const T=B(F,[["render",Q],["__file","LplayerDash.vue"]]);export{T as default};
